---
import { getCollection } from "astro:content";

import Card from "../components/card.astro";
import Search from "../components/search";
import BaseLayout from "../layouts/baseLayout.astro";

const projects = await getCollection("projects");
---

<BaseLayout title="Projects" description="All my projects.">
  <h1 class="mt-20 text-6xl font-bold">Projects</h1>

  <Search
    client:only="solid-js"
    placeholder="Search projects..."
    itemClass="project-item"
    containerId="projects-container"
  />

  <ul
    id="projects-container"
    class="flex flex-col gap-x-4 gap-y-8 sm:gap-x-6 xl:gap-x-8"
  >
    {
      projects
        .sort(
          (a, b) =>
            new Date(b.data.pubDate).valueOf() -
            new Date(a.data.pubDate).valueOf(),
        )
        .map((project) => (
          <li
            class="project-item"
            data-title={project.data.title.toLowerCase()}
            data-description={project.data.description.toLowerCase()}
            data-tags={project.data.tags?.join(" ").toLowerCase() || ""}
          >
            <Card
              href={`/projects/${project.slug}/`}
              title={project.data.title}
              description={project.data.description}
              date={project.data.pubDate}
              expectedReadTime={0}
            />
          </li>
        ))
    }
  </ul>

  <div id="no-results" class="hidden py-12 text-center">
    <p class="text-lg text-neutral-600 dark:text-neutral-500">
      No results found
    </p>
  </div>
</BaseLayout>

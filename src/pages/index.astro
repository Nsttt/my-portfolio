---
import { getCollection } from "astro:content";

import Card from "../components/card.astro";
import BaseLayout from "../layouts/baseLayout.astro";

const posts = await getCollection("posts");
const projects = await getCollection("projects");
---

<BaseLayout
  title="NÃ©stor's Blog"
  description="Writting about software development in Typescript and Rust."
>
  <section class="mt-20 flex">
    <div class="w-full text-xl">
      <h1 class="mb-10 text-3xl">Hi ðŸ‘‹, I'm NÃ©stor from Spain</h1>
      <p class="my-3">
        I'm a software engineer with passion for Typescript and Rust.
      </p>
      <p class="my-3">
        I currently work at <a
          class="text-light-blue-vivid-500 hover:underline"
          href="https://www.nexiona.com/"
          target="_blank">Nexiona</a
        > as a <b>fullstack engineer</b>. I also co-mantain the <a
          class="text-light-blue-vivid-500 hover:underline"
          href="https://create.t3.gg/"
          target="_blank">T3 Stack</a
        > and <a
          class="text-light-blue-vivid-500 hover:underline"
          href="https://trpc.io/"
          target="_blank">tRPC</a
        >.
      </p>
    </div>
  </section>
  <section>
    <div
      class="mt-28 mb-10 flex justify-between border-b-[1px] border-gray-500 pb-5"
    >
      <h2 class="self-baseline text-4xl">Latest posts</h2>
      <a
        href="/blog"
        class="self-baseline text-lg text-light-blue-vivid-500 hover:underline"
        >See all posts</a
      >
    </div>
    <ul class="flex flex-col gap-x-2 gap-y-8 sm:gap-x-4 xl:gap-x-6">
      {
        posts
          .filter((post) => post.data.draft !== true)
          .slice(0, 3)
          .map((post) => (
            <li>
              <Card
                href={`/blog/${post.slug}`}
                title={post.data.title}
                description={post.data.description}
                date={post.data.pubDate}
                expectedReadTime={post.data.expectedReadTime}
              />
            </li>
          ))
      }
    </ul>
  </section>
  <section>
    <div
      class="mt-20 mb-10 flex justify-between border-b-[1px] border-gray-500 pb-5"
    >
      <h2 class="self-baseline text-4xl">Things I've built</h2>
      <a
        href="/projects"
        class="self-baseline text-lg text-light-blue-vivid-500 hover:underline"
        >See all projects</a
      >
    </div>
    <ul class="flex flex-col gap-x-2 gap-y-8 sm:gap-x-4 xl:gap-x-6">
      {
        projects.slice(0, 3).map((project) => (
          <li>
            <Card
              href={`/projects/${project.slug}`}
              title={project.data.title}
              description={project.data.description}
              date={project.data.pubDate}
              expectedReadTime={0}
            />
          </li>
        ))
      }
    </ul>
  </section>
</BaseLayout>

---
import BaseLayout from "../../layouts/baseLayout.astro";
import type { PostFrontmatter } from "../../types/post.domain";
import type { MarkdownInstance } from "astro";

interface Props {
  currentPost: MarkdownInstance<PostFrontmatter>;
}

export async function getStaticPaths() {
  const allPosts = await Astro.glob<PostFrontmatter>(
    "../../content/posts/*.md",
  );

  return allPosts.map((post) => ({
    params: {
      post: post.frontmatter.slug,
    },
    props: {
      currentPost: allPosts.find(
        (p) => p.frontmatter.slug === post.frontmatter.slug,
      ),
    },
  }));
}

const { currentPost } = Astro.props;

const Content = currentPost.Content;
---

<BaseLayout>
  <main>
    <article class="prose prose-slate mt-32 dark:prose-invert lg:prose-xl">
      <h1>{currentPost.frontmatter.title}</h1>
      <Content />
    </article>
  </main>
</BaseLayout>
